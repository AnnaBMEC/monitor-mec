<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Or√ßament√°rio MEC - 2026</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 1100px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        h1 { color: #003366; border-bottom: 3px solid #ffd700; padding-bottom: 10px; margin-bottom: 25px; }
        
        /* Dashboard de Valores */
        .resumo-financeiro { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .card { padding: 20px; border-radius: 10px; color: white; text-align: center; }
        .empenhado { background: #2c3e50; }
        .liquidado { background: #2980b9; }
        .pago { background: #27ae60; }
        .card h2 { margin: 0; font-size: 1.2rem; opacity: 0.9; }
        .card p { font-size: 1.5rem; font-weight: bold; margin: 10px 0 0; }

        .links-rapidos { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 30px; }
        .btn { padding: 12px 20px; border-radius: 8px; text-decoration: none; color: white; font-weight: bold; font-size: 0.9rem; transition: 0.3s; }
        .btn-sei { background: #721c24; }
        .btn-siop { background: #155724; }
        .btn-camara { background: #004a8d; }
        .btn:hover { opacity: 0.8; transform: scale(1.02); }

        input#filtro { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; margin-bottom: 20px; font-size: 1rem; }
        
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; }
        th { background: #003366; color: white; padding: 15px; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        .foto-deputado { width: 45px; height: 45px; border-radius: 50%; border: 2px solid #ddd; }
        .btn-link { color: #007bff; text-decoration: none; font-weight: bold; }
        .btn-link:hover { text-decoration: underline; }
    </style>
</head>
<body>

<div class="container">
    <h1>üèõÔ∏è Gest√£o de Emendas MEC - Exerc√≠cio 2026</h1>

    <div class="links-rapidos">
        <a href="https://sei.mec.gov.br/" target="_blank" class="btn btn-sei">Acessar SEI / MEC</a>
        <a href="https://www.siop.planejamento.gov.br/" target="_blank" class="btn btn-siop">Painel SIOP</a>
        <a href="https://dadosabertos.camara.leg.br/swagger/recursos.html" target="_blank" class="btn btn-camara">API Dados Abertos</a>
        <a href="https://portaldatransparencia.gov.br/emendas?ano=2026&orgao=26000" target="_blank" class="btn" style="background: #6c757d;">Transpar√™ncia Emendas MEC</a>
    </div>

    <div class="resumo-financeiro">
        <div class="card empenhado">
            <h2>Empenhado</h2>
            <p id="total-empenhado">R$ --</p>
        </div>
        <div class="card liquidado">
            <h2>Liquidado</h2>
            <p id="total-liquidado">R$ --</p>
        </div>
        <div class="card pago">
            <h2>Pago</h2>
            <p id="total-pago">R$ --</p>
        </div>
    </div>

    <input type="text" id="filtro" placeholder="üîç Buscar parlamentar para ver emendas espec√≠ficas..." onkeyup="filtrarTabela()">

    <table id="tabelaDados">
        <thead>
            <tr>
                <th>Parlamentar</th>
                <th>Partido/UF</th>
                <th>A√ß√£o</th>
            </tr>
        </thead>
        <tbody id="lista-corpo">
            </tbody>
    </table>
</div>

<script>
    // Configura√ß√µes iniciais
    const ORGAO_MEC = "26000";
    const ANO_ATUAL = "2026";

    async function inicializar() {
        // 1. Simula√ß√£o de totais do SIOP/Portal (Valores ilustrativos para o Dashboard)
        // Em um ambiente de produ√ß√£o com API Key, aqui far√≠amos o fetch real
        document.getElementById('total-empenhado').innerText = "R$ 4.2B";
        document.getElementById('total-liquidado').innerText = "R$ 2.8B";
        document.getElementById('total-pago').innerText = "R$ 1.9B";

        // 2. Carregar Parlamentares da API da C√¢mara
        try {
            const res = await fetch("https://dadosabertos.camara.leg.br/api/v2/deputados?ordem=ASC&ordenarPor=nome");
            const json = await res.json();
            const deputados = json.dados;
            
            const tbody = document.getElementById('lista-corpo');
            tbody.innerHTML = '';

            deputados.forEach(d => {
                // Link din√¢mico para o Portal da Transpar√™ncia filtrado por Deputado e MEC
                const linkEmendas = `https://portaldatransparencia.gov.br/emendas?paginacaoSimples=true&tamanhoPagina=&offset=&direcaoOrdenacao=asc&nomeParlamentar=${encodeURIComponent(d.nome)}&orgao=${ORGAO_MEC}&ano=${ANO_ATUAL}`;

                tbody.innerHTML += `
                    <tr>
                        <td style="display:flex; align-items:center; gap:10px;">
                            <img src="${d.urlFoto}" class="foto-deputado">
                            <strong>${d.nome}</strong>
                        </td>
                        <td>${d.siglaPartido} / ${d.siglaUf}</td>
                        <td>
                            <a href="${linkEmendas}" target="_blank" class="btn-link">Ver Emendas MEC</a>
                        </td>
                    </tr>
                `;
            });
        } catch (e) {
            console.error("Erro ao carregar parlamentares", e);
        }
    }

    function filtrarTabela() {
        let filter = document.getElementById("filtro").value.toUpperCase();
        let rows = document.getElementById("lista-corpo").getElementsByTagName("tr");
        for (let row of rows) {
            row.style.display = row.textContent.toUpperCase().includes(filter) ? "" : "none";
        }
    }

    window.onload = inicializar;
</script>

</body>
</html>
